---
title: MSA
categories:
  - 소프트웨어 아키텍처
  - 서비스 지향 아키텍처
tags:
  - MSA
toc_sticky: true
toc_label: ""
toc_icon: ""
comments: true
---

소프트웨어 아키텍처에 속하는 서비스 지향 아키텍쳐인 MSA에 대해 작성하였습니다. 


---

### MSA란?

MSA는 Microservices Architecture(마이크로서비스 아키텍처)의 약어이다.

마이크로서비스 아키텍처는 **단일한 큰 애플리케이션을 여러 개의 작은 서비스로 분리하는 소프트웨어 설계 패턴,** 이 각각의 작은 서비스들은 독립적으로 배포, 확장, 관리 가능하다.

### MSA의 특징

1. 서비스 독립성: 각 서비스는 독립적으로 개발, 배포, 확장 가능하다.
2. 기술 다양성: 각 서비스는 적절한 기술을 선택하여 구현할 수 있다.
3. 배포 유연성: 새로운 요구사항에 따라 서비스를 쉽게 추가/변경 가능 하다.
4. 확장성: 부하가 높은 서비스만 선택적으로 확장 가능하다.
5. 장애 격리: 한 서비스의 장애가 전체 시스템에 미치는 영향을 최소화 할 수 있다.

MSA는 **대규모 복잡한 시스템을 개발하고 운영할 때 유용**하다. 각 서비스가 독립적이므로 개발 및 배포 프로세스가 단순해지고, 확장성과 유연성이 높아진다. 다만 서비스 간 통신, 모니터링, 배포 등 새로운 과제들이 발생할 수 있다.

### MSA에서 자유로운 무중단 배포가 가능한 이유?

1. 서비스 독립성: MSA에서 각 서비스는 독립적으로 개발, 배포, 확장될 수 있다. 한 서비스의 배포가 다른 서비스에 영향을 미치지 않는다.
2. 서비스 간 느슨한 결합: MSA에서는 서비스 간 느슨한 결합을 지향한다. 서비스 간 통신은 API 호출 등 명시적인 인터페이스를 통해 이루어집다. 이를 통해 한 서비스의 배포가 다른 서비스에 미치는 영향을 최소화할 수 있다.
3. 서비스 버전 관리: MSA에서는 각 서비스의 버전을 독립적으로 관리할 수 있다. 새로운 버전의 서비스를 배포하더라도 이전 버전과 병렬로 운영가능, 이를 통해 서비스 중단 없이 배포를 진행할 수 있다.
4. 서비스 등록 및 발견: MSA에서는 서비스 등록 및 발견 메커니즘을 통해 서비스 간 동적 연결이 가능, 이를 통해 새로운 버전의 서비스를 배포하더라도 기존 클라이언트가 이를 자동으로 발견하고 연결할 수 있다.
5. 배포 자동화: MSA에서는 CI/CD 파이프라인을 활용하여 배포 프로세스를 자동화 할 수 있음, 이를 통해 빠르고 안정적인 배포가 가능

따라서 MSA의 이러한 특성들은 개발팀이 서비스를 독립적으로 배포할 수 있게 하며, 이를 통해 서비스 중단 없이 빠르고 안정적인 배포가 가능해 진다.

### 서비스 발견 메커니즘이란?

서비스 간 동적 연결을 가능하게 하는 기능을 말한다.

### 서비스 발견 메커니즘의 주요 특징

1. 서비스 등록: 각 서비스는 자신의 정보(IP, 포트, 버전 등)를 서비스 레지스트리에 등록
2. 서비스 검색: 클라이언트 서비스는 서비스 레지스트리를 통해 필요한 서비스를 검색할 수 있고 서비스 레지스트리는 적절한 서비스 인스턴스를 찾아 클라이언트에게 제공
3. 동적 연결: 클라이언트 서비스는 서비스 레지스트리에서 받은 정보를 활용하여 필요한 서비스에 동적으로 연결 가능
4. 부하 분산: 서비스 레지스트리는 클라이언트 요청을 여러 서비스 인스턴스에 분산 가능
5. 장애 탐지 및 복구: 서비스 레지스트리는 서비스 인스턴스의 상태를 모니터링하고, 장애 발생 시 자동으로 복구할 수 있음

이러한 서비스 발견 메커니즘을 통해 MSA에서는 서비스 간 동적 연결이 가능하다. 새로운 버전의 서비스를 배포하더라도 기존 클라이언트가 자동으로 새 서비스를 발견하고 연결할 수 있다. 이를 통해 서비스 중단 없이 배포를 진행 가능하다.

### 개발자로서 MSA를 활용해야 하는 이유는?

1. 기술 선택의 자유
   - 각 서비스에 적합한 기술 스택을 선택할 수 있어 개발 생산성이 높아진다.
2. 독립적인 개발 및 배포
   - 서비스 간 결합도가 낮아 개별 서비스의 독립적인 개발 및 배포가 가능하다.
3. 확장성 및 가용성 향상
   - 서비스 장애 시 다른 서비스에 미치는 영향이 최소화되어 시스템의 확장성과 가용성이 높아진다.

### 구체적인 MSA 활용 사례

- 전자상거래 플랫폼: 장바구니, 결제, 배송 등의 기능을 독립적인 서비스로 분리하여 개발 및 배포
- 금융 서비스: 계좌 조회, 송금, 대출 등의 기능을 독립적인 서비스로 분리하여 개발 및 배포
- 게임 플랫폼: 게임 로그인, 게임 매치메이킹, 게임 순위 등의 기능을 독립적인 서비스로 분리하여 개발 및 배포

### MSA 구현 시 일반적으로 사용되는 대표적인 기술

1. 서비스 통신 기술:
    1. REST API
    2. gRPC
    3. 메시징 큐(RabbitMQ, Apache Kafka 등)
    4. 서비스 메시(Service Mesh) - Istio, Linkerd 등
2. 서비스 등록 및 발견 기술:
    1. Service Discovery - Consul, Zookeeper, Eureka 등
    2. API Gateway - Kong, Nginx, Zuul 등
3. 컨테이너 기술:
    1. Docker
    2. Kubernetes
4. 배포 및 오케스트레이션 기술:
    1. CI/CD 도구 - Jenkins, CircleCI, Travis CI 등
    2. 배포 자동화 - Ansible, Terraform, CloudFormation 등
5. 모니터링 및 로깅 기술:
    1. 모니터링 - Prometheus, Grafana, Elastic Stack 등
    2. 로깅 - Elasticsearch, Fluentd, Logstash 등
6. 서비스 메시 기술:
    1. Istio
    2. Linkerd
    3. Consul Connect
7. 서비스 검색 및 API 관리 기술:
    1. Consul
    2. Zookeeper
    3. Netflix Eureka
8. 데이터 스토리지 기술:
    1. NoSQL 데이터베이스 - MongoDB, Cassandra, Couchbase 등
    2. 분산 파일 시스템 - HDFS, S3 등