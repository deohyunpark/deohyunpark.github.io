---
title: JenKins, Docker 그리고 Kubernetes
categories:
- Jenkins
- Docker
- Kubernetes
- DevOps
- CI/CD
- 컨테이너
  tags:
- MSA
  toc_sticky: true
  toc_label: ""
  toc_icon: ""
---

소프트웨어 아키텍처에 속하는 서비스 지향 아키텍쳐인 MSA에 대해 작성하였습니다.


---

# JenKins, Docker 그리고 Kubernetes

---

이 전 프로젝트 할 당시엔 CI/CD 파이프라인 구축과 무중단 배포를 Github Actions과 Nginx만으로 구성했었기 때문에 젠킨스, 도커, 쿠버네티스에 대해서 정확히 어떠한 역할을 하는 도구인지 알지 못하여서 각각의 개념을 정리하기 보다는 개인적인 궁금증, 세개의 도구들의 흐름 및 새로 추가된 개념을 기존 지식이랑 정리 겸 작성하는 글 이고, Jenkins와 Docker의 개념보다 Kubernetes의 개념이 더 부족해서 Kubernetes의 비중이 많습니다!

---

<p align="center">
        <img width="311" alt="스크린샷 2024-08-12 오후 4 18 44" src="https://github.com/user-attachments/assets/64fea4d2-f764-4897-8af7-2d4bb58a68d0">
    </p>

### **Kubernetes, Docker, Jenkins**를 분류하면 어떻게 분류 할 수 있나요?

세가지 도구 모두 DevOps 및 클라우드 컴퓨팅 분야에서 널리 사용되는 도구이다.

이들을 다음과 같이 분류할 수 있다.

1. 지속적 통합 및 배포(CI/CD)
   - Jenkins : CI/CD 파이프 라인을 구축하고 자동화 하기위한 오픈소스 자동화 서버
2. 컨테이너화
   - Docker: 컨테이너 기반 애플리케이션 배포 및 관리를 위한 오픈소스 플랫폼
3. 컨테이너 오케스트레이션
   - Kubernetes: 컨테이너화 된 애플리케이션의 자동화된 배포, 확장 및 관리를 위한 오픈소스 플랫폼

즉, Jenkins는 CI/CD 파이프라인의 일부로 애플리케이션을 컨테이너화하고, Docker는 이 컨테이너를 관리하며, Kubernetes는 이 컨테이너화된 애플리케이션의 자동화된 배포와 관리를 담당( = 컨테이너 오케스트레이션)하는 것이다.

### 컨테이너 오케스트레이션이 뭐고 쿠버네티스 클러스터가 뭔가요?

- 컨테이너 오케스트레이션
   - 컨테이너 기반 애플리케이션을 자동으로 배포, 관리, 스케일링 등 애플리케이션을 효율적으로 운영하기 위해 필요한 기능을 제공하는것
   - 주요 기능으로는 **컨테이너 배포, 스케일링(규모 늘였다 줄였다 하는 것), 부하 분산, 모니터링** 등이 있다.
- 쿠버네티스 클러스터
   - **컨테이너 오케스트레이션을 실현하는 인프라 환경**
   - 개발자들은 이 클러스터 위에서 컨테이너화된 애플리케이션을 배포하고 운영할 수 있다.

### 그럼 Jenkins**가 CI하고 Docker가 컨테이너화 한 이미지로 만들고 이걸 CD하는게 Kubernetes인가요?**

yes! 그렇게 볼 수 있다.

각 도구의 역할을 간단히 정리하자면 다음과 같다.

- Jenkins:
   - 지속적 통합(CI) 파이프라인을 구축하여 애플리케이션 소스 코드를 빌드, 테스트, 패키징 함
- Docker:
   - Jenkins에 의해 빌드된 애플리케이션을 Docker 컨테이너 이미지로 패키징 후 이 컨테이너 이미지를 Docker 레지스트리에 저장
- Kubernetes:
   - Docker가 생성한 컨테이너 이미지를 기반으로 애플리케이션을 자동으로 배포하고 관리
   - 지속적 배포(CD) **파이프라인의 일부**로, **컨테이너 오케스트레이션을 통해 애플리케이션의 확장, 로드 밸런싱, 장애 복구 등을 처리**

### 사실 Kubernetes가 뭔지 확실하게 와닿지 않아요. Jenkins와 Docker로도 CI/CD 파이프 라인을 구축 할 수 있지 않나요? 왜쓰는거에요?

컨테이너는 애플리케이션을 포장하고 실행하는 좋은 방법이다. 프로덕션 환경에서는 애플리케이션을 실행하는 컨테이너를 관리하고 가동 중지 시간이 없는지 확인해야 한다. 예를 들어 컨테이너가 다운되면 다른 컨테이너를 다시 시작해야 한다. 이 문제를 시스템에 의해 처리한다면 더 쉽지 않을까?

**그것이 쿠버네티스가 필요한 이유이다!** 쿠버네티스는 분산 시스템을 탄력적으로 실행하기 위한 프레임 워크를 제공한다. 애플리케이션의 확장과 장애 조치를 처리하고, 배포 패턴 등을 제공한다.

또한 젠킨스와 도커의 조합으로도 CI/CD 파이프 라인은 구축 가능하지만, 무중단 배포까지 하려면 Nginx같은 리버스 프록시 역할을 하는 was가 필요하다.

### **Jenkins와 도커의 조합으로도 CI/CD 파이프 라인은 구축 가능하지만, 무중단 배포까지 하려면 Nginx같은 리버스 프록시 역할을 하는 was가 필요한데 그 역할을 하기 위해서 쿠버네티스를 사용하는건가요? 쿠버네티스 주 목적이 컨테이너 오케스트라 라면서?**

쿠버네티스의 주 목적은 컨테이너 오케스트레이션이지만, 무중단 배포를 구현하는 데도 중요한 역할을 할 수 있다. 왜나하면 쿠버네티스가 로드밸런싱, 리버스 프록시 역할을 할 수 있기 때문

젠킨스 + 도커 + 쿠버네티스 조합으로 CI/CD 무중단 배포를 구성하게 된다면, 쿠버네티스가 리버스 프록시 or 로드밸런싱 역할을 해줄수 있다. **주 목적은 규모가 크고 컨테이너 환경의 복잡한 애플리케이션을 운영할 때, 쿠버네티스는 배포 자동화, 무중단 업데이트, 자동 스케일링 등의 기능을 제공하여 안정적이고 효율적인 운영을 가능하게 한다.**

### **그럼 만약 Docker랑 Jenkins로 무중단 배포 할때 AWS LoadBalancer와 Kubernetes 둘중에 어느걸 사용해야하나요?**

무중단 배포를 위해 도커와 젠킨스를 사용할 때, AWS 로드 밸런서와 쿠버네티스 중 어느 것을 사용해야 하는지에 대해서는 상황에 따라 다르다.

- AWS 로드 밸런서 사용: **쿠버네티스 클러스터를 사용하지 않고 EC2 인스턴스에 직접 도커 컨테이너를 배포하는 경우** AWS 로드 밸런서를 통해 트래픽을 관리하고 무중단 배포를 구현할 수 있습니다.이 경우 쿠버네티스의 복잡성을 피할 수 있다.
- 쿠버네티스 사용: **쿠버네티스 클러스터에 도커 컨테이너를 배포하는 경우** 쿠버네티스의 Deployment, Service, Ingress 리소스를 활용하여 무중단 배포를 구현할 수 있습니다. 쿠버네티스 내부의 로드 밸런싱 기능을 활용할 수 있습니다.쿠버네티스는 확장성, 고가용성, 자동화 등의 장점이 있습니다.

**일반적으로 규모가 크고 복잡한 시스템의 경우 쿠버네티스를 사용하는 것이 좋음 쿠버네티스는 컨테이너 오케스트레이션 및 관리에 특화되어 있어 무중단 배포를 포함한 다양한 운영 과제를 해결할 수 있다.**

반면, 소규모 시스템이나 쿠버네티스 도입이 어려운 경우 AWS 로드 밸런서를 활용하는 것도 좋은 방법이다.

결국 팀의 기술 역량, 시스템의 복잡도, 운영 요구사항 등을 종합적으로 고려하여 AWS 로드 밸런서와 쿠버네티스 중 어느 것을 선택할지 결정해야 한다.

✚ 더 추가하면 좋을것들(08.12)

1. 실제 쿠버네티스가 쓰이는 환경 예시

Etc

https://kubernetes.io/ko/docs/concepts/overview/

https://www.redhat.com/ko/topics/containers/what-is-kubernetes